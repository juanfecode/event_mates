<div class="container w-50 mt-3 p-3 border shadow">
    <div class="w-100" style="height: 500px; overflow-y: auto;" data-controller="chat-scroll">
        <% @messages.each do |message| %>
            <% if current_user == message.user %>
            <div class="d-flex justify-content-end" data-chat-scroll-target="messages">
                    <div id="message<%= message.id %>" class="chatBubble" style="width: 250px;">
                        <p class="mb-0"><%= message.message %></p>
                    </div>
            </div>
                <% else %>
                    <div class="d-flex justify-content-start" data-chat-scroll-target="messages">
                        <div id="message<%= message.id %>" class="mt-1 py-2 ps-4 bg-primary rounded-pill" style="width: 250px;">
                            <p class="small mb-0 text-white"><strong><%= message.user.first_name %>:</strong></p>
                            <p class="mb-0 text-white"><%= message.message %></p>
                        </div>
                    </div>
            <% end %>
        <% end %>
    </div>
    <div class="mt-3">
        <%= simple_form_for [@group, @message], url: create_message_path, html: {class: "d-flex"} do |f| %>
            <%= f.input :message, label: false, wrapper_html: {class: "flex-grow-1"} %>
            <%= f.submit "Send", class: "btn btn-primary mb-3" %>
        <% end %>
    </div>
</div>